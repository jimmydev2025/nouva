(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[106],{11711:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat",function(){return a(6262)}])},6262:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>k});var i=a(74848),s=a(81363),n=a(86715),r=a(96540),l=a(13368),c=a.n(l),d=a(38890),o=a(30157),x=a(76715),m=a(10867);let h=e=>{var t;let{isOpen:a,onClose:s,template:n}=e,[l,c]=(0,r.useState)("new"),[d,o]=(0,r.useState)(""),[x,m]=(0,r.useState)(!1),[h,u]=(0,r.useState)("");return((0,r.useEffect)(()=>{a||(o(""),c("new"),m(!1))},[a]),n)?(0,i.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center transition-opacity duration-200 ".concat(a?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-black/50 transition-opacity duration-200 ".concat(a?"opacity-100":"opacity-0"),onClick:s}),(0,i.jsxs)("div",{className:"relative z-10 w-full max-w-[600px] mx-4 bg-zinc-50 dark:bg-zinc-950 rounded-lg shadow-xl border border-zinc-200 dark:border-zinc-800 transition-all duration-200 ".concat(a?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-4"),children:[(0,i.jsxs)("div",{className:"p-6 pb-0",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-zinc-900 dark:text-white",children:n.name}),(0,i.jsx)("p",{className:"mt-1.5 text-sm text-zinc-500 dark:text-zinc-400",children:n.description})]}),(0,i.jsxs)("div",{className:"p-6 space-y-6",children:[(0,i.jsx)("div",{className:"h-48 w-full rounded-lg overflow-hidden bg-zinc-100 dark:bg-zinc-900",children:"string"==typeof n.image?(0,i.jsx)("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{src:n.image.light,alt:n.name,className:"w-full h-full object-cover block dark:hidden"}),(0,i.jsx)("img",{src:n.image.dark,alt:n.name,className:"w-full h-full object-cover hidden dark:block"})]})}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:"Project"}),(0,i.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Which project would you like to open this template in?"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("button",{onClick:()=>c("new"),className:"flex flex-col items-center justify-between rounded-lg border-2 p-4 transition-colors\n                  ".concat("new"===l?"border-blue-600 dark:border-blue-500 bg-white dark:bg-zinc-900":"border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 hover:bg-zinc-50 dark:hover:bg-zinc-800"),children:[(0,i.jsx)("div",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:"New Project"}),(0,i.jsx)("div",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Create a new project"})]}),(0,i.jsxs)("button",{onClick:()=>c("existing"),className:"flex flex-col items-center justify-between rounded-lg border-2 p-4 transition-colors\n                  ".concat("existing"===l?"border-blue-600 dark:border-blue-500 bg-white dark:bg-zinc-900":"border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 hover:bg-zinc-50 dark:hover:bg-zinc-800"),children:[(0,i.jsx)("div",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:"Existing Project"}),(0,i.jsx)("div",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Select an existing project"})]})]}),"new"===l?(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("label",{className:"block text-sm text-zinc-900 dark:text-white",children:["Project Name",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsx)("input",{type:"text",value:d,onChange:e=>o(e.target.value),className:"w-full h-10 px-3 rounded-md border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 text-zinc-900 dark:text-white text-sm outline-none",placeholder:"Example Project"})]}):(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("label",{className:"block text-sm text-zinc-900 dark:text-white",children:["Select Project",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("button",{type:"button",onClick:()=>m(!x),className:"w-full h-10 px-3 rounded-md border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 text-left text-sm outline-none flex items-center justify-between",children:[(0,i.jsx)("div",{className:"flex items-center",children:h?(0,i.jsx)("span",{className:"text-zinc-900 dark:text-white",children:null===(t=[].find(e=>e.id===h))||void 0===t?void 0:t.name}):(0,i.jsx)("span",{className:"text-zinc-500",children:"Select a project"})}),(0,i.jsx)("svg",{className:"w-5 h-5 text-zinc-500 transition-transform duration-200 ".concat(x?"transform rotate-180":""),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),x&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"fixed inset-0 z-30",onClick:()=>m(!1)}),(0,i.jsx)("div",{className:"absolute z-40 mt-1 w-full rounded-md border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 shadow-lg",children:(0,i.jsx)("div",{className:"px-3 py-2 text-sm text-zinc-500 dark:text-zinc-400",children:"No projects found"})})]})]})]})]})]}),(0,i.jsxs)("div",{className:"flex justify-end space-x-2 p-6 pt-0",children:[(0,i.jsx)("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-zinc-700 dark:text-zinc-300 hover:text-zinc-900 dark:hover:text-white transition-colors",children:"Cancel"}),(0,i.jsx)("button",{disabled:!0,className:"px-4 py-2 text-sm font-medium text-zinc-400 bg-zinc-200 dark:bg-zinc-800 dark:text-zinc-500 rounded-md cursor-not-allowed",children:"Open Template"})]})]})]}):null};var u=a(21925),p=a(43650),g=a(56773),b=a(94618),j=a(14674);let f=()=>{let e=(0,n.useRouter)(),t=(0,r.useRef)(null),a=(0,r.useRef)(null),[s,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(null),[f,k]=(0,r.useState)(!1),[z,v]=(0,r.useState)(!1),[w,N]=(0,r.useState)(""),[y,C]=(0,r.useState)([]),[S,A]=(0,r.useState)(!1),[P,E]=(0,r.useState)(!1),{user:T}=(0,b.k)(),{addChat:_,addMessage:I,hasReachedChatLimit:R}=(0,g.L)(),[O,F]=(0,r.useState)(!1),D=()=>{let e=t.current;e&&(e.style.height="inherit",e.style.height="".concat(e.scrollHeight,"px"))};(0,r.useEffect)(()=>{D()},[s]);let L=e=>{l(e),t.current&&t.current.focus()},U=async()=>{if(s.trim()||y.length>0){if(R((null==T?void 0:T.isPro)||!1)){E(!0);return}try{let t=y.map(e=>({name:e.name,type:e.type,size:e.size,url:URL.createObjectURL(e)})),a={id:crypto.randomUUID(),type:"user",content:s.trim(),files:y.length>0?t:void 0},i={name:s.trim().slice(0,50)||"New Chat",createdAt:Date.now(),messages:[a]},n=await _(i);N(s),v(!0),e.push("/chat/".concat(n.id));try{await fetch("/api/message-counts",{method:"POST"})}catch(e){console.error("Failed to increment message count:",e)}let r=await fetch("/api/chat/completion",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{type:"user",content:s.trim()}],chatId:n.id})});if(!r.ok)throw Error("Failed to get AI response");let{response:l}=await r.json(),c={id:crypto.randomUUID(),type:"ai",content:l||"I apologize, but I wasn't able to generate a response. Please try again."};await I(n.id,c)}catch(e){console.error("Error creating chat:",e)}}},M=e=>{C(t=>t.filter((t,a)=>a!==e))};return z?(0,i.jsx)("div",{className:"h-[calc(100vh-4rem)]",children:(0,i.jsx)(u.A,{initialMessage:w,initialFiles:y,onClose:()=>v(!1),isFirstMessageLoading:O})}):(0,i.jsxs)("div",{className:"flex flex-col items-center w-full pt-48",children:[S&&(0,i.jsx)("div",{className:"absolute top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-md shadow-lg z-50",children:"Maximum 3 files allowed"}),(0,i.jsx)("h1",{className:"text-4xl font-bold text-zinc-900 dark:text-white mb-8",children:"How can I help you today?"}),(0,i.jsxs)("div",{className:"w-full max-w-3xl",children:[(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("div",{className:"relative flex flex-col bg-white dark:bg-zinc-900 rounded-lg outline-none ring-0 border border-zinc-200 dark:border-zinc-700",children:[y.length>0&&(0,i.jsx)("div",{className:"p-3 bg-zinc-50 dark:bg-zinc-950 rounded-t-lg border-b border-zinc-200 dark:border-zinc-700",children:(0,i.jsx)("div",{className:"flex flex-wrap gap-4",children:y.map((e,t)=>(0,i.jsx)(p.A,{file:e,onRemove:()=>M(t)},t))})}),(0,i.jsx)("textarea",{ref:t,value:s,onChange:e=>{l(e.target.value),D()},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),U())},placeholder:"Ask nuvon a question...",rows:2,className:"w-full bg-transparent text-zinc-900 dark:text-white placeholder-zinc-500 rounded-lg py-3 px-4 outline-none focus:outline-none resize-none min-h-[72px] overflow-hidden border-0 ring-0 focus:ring-0"}),(0,i.jsxs)("div",{className:"flex justify-between items-center px-6 py-1.5",children:[(0,i.jsx)("input",{ref:a,type:"file",onChange:e=>{let t=e.target.files?Array.from(e.target.files):[];if(y.length+t.length>3){A(!0),setTimeout(()=>A(!1),3e3),e.target&&(e.target.value="");return}C(e=>[...e,...t]),e.target&&(e.target.value="")},className:"hidden",multiple:!0}),(0,i.jsx)("button",{onClick:()=>{var e;return null===(e=a.current)||void 0===e?void 0:e.click()},className:"text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors p-1 -ml-2","aria-label":"Attach file",children:(0,i.jsx)(o.A,{className:"w-5 h-5"})}),(0,i.jsx)("button",{onClick:U,className:"text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors p-1 -mr-2","aria-label":"Send message",children:(0,i.jsx)(x.A,{className:"w-5 h-5"})})]})]}),(0,i.jsx)("div",{className:"flex justify-center mt-4",children:(0,i.jsx)("div",{className:"inline-flex gap-2",children:["What are the top 5 trending tokens on solana"].map((e,t)=>(0,i.jsxs)("button",{onClick:()=>L(e),className:"inline-flex items-center px-3 py-1 rounded-full bg-zinc-50 dark:bg-zinc-950 text-zinc-900 dark:text-white text-sm hover:bg-zinc-100 dark:hover:bg-zinc-900 transition-colors duration-150 border border-zinc-200 dark:border-zinc-700",children:[e,(0,i.jsx)(m.A,{className:"w-3 h-3 ml-1.5"})]},t))})})]}),(0,i.jsxs)("div",{className:"mt-16 w-full mx-auto",style:{width:"calc(100% + 200px)",marginLeft:"-100px"},children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,i.jsx)("h2",{className:"text-lg font-medium text-zinc-900 dark:text-white",children:"Starter Templates"}),(0,i.jsx)("button",{className:"px-2.5 py-1 rounded-md bg-zinc-50 dark:bg-zinc-950 text-zinc-900 dark:text-white text-xs hover:bg-zinc-100 dark:hover:bg-zinc-900 transition-colors duration-150 border border-zinc-200 dark:border-zinc-700",children:"Request Template"})]}),(0,i.jsx)("div",{className:"grid grid-cols-3 gap-8",children:[{name:"AI Automation",description:"Automate on-chain tasks with AI",image:{light:"/images/template-light-1.jpg",dark:"/images/template-dark-1.jpg"}},{name:"Data Analysis",description:"Analyze live on-chain project data",image:{light:"/images/template-light-2.jpg",dark:"/images/template-dark-2.jpg"}},{name:"Wallet Tracker",description:"Track wallets and analyse data with AI",image:{light:"/images/template-light-3.jpg",dark:"/images/template-dark-3.jpg"}}].map((e,t)=>(0,i.jsxs)("button",{className:"text-left group",onClick:()=>{d(e),k(!0)},children:[(0,i.jsxs)("div",{className:"relative aspect-[16/9] rounded-lg overflow-hidden bg-zinc-100 dark:bg-zinc-800 mb-3",children:[(0,i.jsx)("img",{src:e.image.light,alt:e.name,className:"w-full h-full object-cover transition-all duration-200 block dark:hidden"}),(0,i.jsx)("img",{src:e.image.dark,alt:e.name,className:"w-full h-full object-cover transition-all duration-200 hidden dark:block"}),(0,i.jsx)("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center",children:(0,i.jsx)("span",{className:"px-3 py-1.5 bg-zinc-50 dark:bg-zinc-950 text-zinc-900 dark:text-white rounded-md font-medium text-xs",children:"View Template"})})]}),(0,i.jsx)("h3",{className:"font-medium text-zinc-900 dark:text-white mb-1",children:e.name}),(0,i.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:e.description})]},t))})]})]}),(0,i.jsx)(h,{isOpen:f,onClose:()=>k(!1),template:c}),(0,i.jsx)(j.A,{isOpen:P,onClose:()=>E(!1),type:"conversations",isPro:(null==T?void 0:T.isPro)||!1})]})},k=()=>{let{ready:e,authenticated:t}=(0,s.m)(),a=(0,n.useRouter)();return((0,r.useEffect)(()=>{e&&!t&&a.push("/")},[e,t,a]),e&&t)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c(),{children:(0,i.jsx)("title",{children:"New Chat - nuvon"})}),(0,i.jsx)(d.A,{children:(0,i.jsx)("div",{className:"p-8",children:(0,i.jsx)(f,{})})})]}):null}}},e=>{var t=t=>e(e.s=t);e.O(0,[481,923,890,925,636,593,792],()=>t(11711)),_N_E=e.O()}]);